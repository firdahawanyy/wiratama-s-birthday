<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Archive</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Poppins:wght@300;400;500;600&family=Courier+Prime&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg-black: #050505;
            --text-white: #f5f5f5;
            --text-gray: #888888;
            --accent-gold: #C6A87C;
            --silk-transition: all 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        }

        /* 1. SMOOTH SCROLL FIX */
        html { scroll-behavior: smooth; }

        * { box-sizing: border-box; cursor: none; }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-black);
            color: var(--text-white);
            overflow-x: hidden;
            opacity: 0; animation: fadeInPage 2s ease forwards;
        }

        @keyframes fadeInPage { to { opacity: 1; } }

        /* --- CUSTOM CURSOR --- */
        #cursor-dot, #cursor-outline {
            position: fixed; top: 0; left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
        #cursor-dot {
            width: 8px; height: 8px; background-color: white;
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }
        #cursor-outline {
            width: 40px; height: 40px; border: 1px solid rgba(255, 255, 255, 0.5);
            transition: width 0.2s, height 0.2s, background-color 0.2s;
        }
        body.hovering #cursor-outline {
            width: 60px; height: 60px;
            background-color: rgba(255, 255, 255, 0.1);
            border-color: white; backdrop-filter: blur(2px);
        }

        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        
        /* --- LOGIN & INTRO --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            z-index: 5000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: var(--silk-transition);
        }

        .particle {
            position: absolute; background: white; border-radius: 50%;
            opacity: 0; animation: floatUp linear infinite; pointer-events: none;
        }
        @keyframes floatUp {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            20% { opacity: 0.5; }
            80% { opacity: 0.5; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0; }
        }

        .hover-text-swap { position: relative; display: inline-block; cursor: none; transition: 0.5s; }
        .hover-text-swap::after {
            content: attr(data-hover); position: absolute; left: 0; top: 0; width: 100%; opacity: 0;
            color: var(--accent-gold); transition: 0.5s; text-align: center;
        }
        .hover-text-swap:hover { color: transparent; }
        .hover-text-swap:hover::after { opacity: 1; }

        .login-input {
            background: transparent; border: none; border-bottom: 1px solid #333;
            color: white; font-family: 'Playfair Display'; font-size: 2rem;
            text-align: center; padding: 10px; margin-top: 30px; outline: none; width: 250px; letter-spacing: 5px;
            transition: 0.5s;
        }
        .login-input:focus, .login-input:not(:placeholder-shown) { border-bottom-color: white; text-shadow: 0 0 15px rgba(255,255,255,0.6); }
        
        .login-btn {
            margin-top: 40px; background: transparent; color: #888; padding: 12px 40px;
            border: 1px solid #333; border-radius: 50px; font-family: 'Poppins'; font-size: 0.7rem;
            letter-spacing: 2px; transition: 0.5s ease; text-transform: uppercase;
            position: relative; overflow: hidden;
        }
        .login-btn:hover { background: white; color: black; border-color: white; box-shadow: 0 0 20px rgba(255,255,255,0.2); }

        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; border-bottom-color: #8D6E63 !important; }
        @keyframes shake { 
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        #access-msg {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-family: 'Courier Prime', monospace; color: #0f0; 
            font-size: 2rem; letter-spacing: 5px; opacity: 0; pointer-events: none;
            text-shadow: 0 0 10px #0f0;
        }
        #welcome-text {
            font-family: 'Playfair Display'; font-style: italic; font-size: 1.5rem; margin-top: 20px;
            opacity: 0; transition: 1s;
        }
        .archive-meta {
            position: absolute; bottom: 30px; right: 30px;
            font-family: 'Courier Prime', monospace; font-size: 0.6rem; color: #444; letter-spacing: 1px;
        }

        /* --- SURAT (ATMOSPHERE) --- */
        #scroll-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #080808; z-index: 4000; display: none;
            justify-content: center; align-items: center; opacity: 0; transition: var(--silk-transition);
            overflow: hidden;
        }
        .ambient-glow {
            position: absolute; top: 50%; left: 50%;
            width: 120vw; height: 120vh;
            background: radial-gradient(circle, rgba(100,100,100,0.08) 0%, rgba(0,0,0,0) 60%);
            transform: translate(-50%, -50%);
            animation: pulseGlow 8s ease-in-out infinite alternate; pointer-events: none; z-index: 0;
        }
        @keyframes pulseGlow { 0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; } 100% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; } }
        .vignette-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, transparent 35%, rgba(0,0,0,0.95) 90%);
            pointer-events: none; z-index: 1;
        }
        .letter-dust {
            position: absolute; background: rgba(255,255,255,0.2); border-radius: 50%;
            pointer-events: none; animation: floatDust linear infinite;
        }
        @keyframes floatDust { 0% { transform: translateY(0); opacity: 0; } 50% { opacity: 0.5; } 100% { transform: translateY(-100px); opacity: 0; } }

        .vintage-paper {
            position: relative; z-index: 10; width: 80%; max-width: 600px; padding: 50px; background: #0e0e0e; border: 1px solid #222;
            color: #ccc; box-shadow: 0 0 80px rgba(0,0,0,1); transform: translateY(20px); transition: var(--silk-transition);
        }
        .show-paper { opacity: 1; transform: translateY(0); }

        /* --- MAIN CONTENT & TRANSITION FIX --- */
        #echo-container {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 4500; pointer-events: none; display: none;
            justify-content: center; align-items: center; overflow: hidden;
        }
        .echo-img { position: absolute; height: 60vh; opacity: 0; filter: grayscale(100%); transition: all 1s ease-out; }
        .echo-active { animation: echoPulse 2s cubic-bezier(0.165, 0.84, 0.44, 1) forwards; }
        @keyframes echoPulse { 0% { transform: scale(0.8); opacity: 0; } 50% { opacity: 0.8; } 100% { transform: scale(2); opacity: 0; filter: blur(10px); } }

        #main-content { display: none; opacity: 0; transition: opacity 3s ease-in-out; }
        
        section {
            min-height: 100vh; padding: 100px 20px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center; position: relative;
        }

        /* 2. HERO REVISI (FADE TO BLACK LEBIH HALUS) */
        .hero {
            /* Perhatikan gradasi di akhir: transparent ke #050505 full di 95% */
            background: linear-gradient(to bottom, rgba(0,0,0,0.4) 0%, rgba(5,5,5,0) 50%, #050505 98%), url('foto.jpg');
            background-size: cover; background-position: center; background-attachment: fixed;
            border-bottom: none; /* Hilangkan garis keras */
        }
        .hero h1 { font-size: 3.5rem; text-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .hero-btn {
            margin-top: 40px; padding: 15px 35px; border: 1px solid rgba(255,255,255,0.3);
            background: rgba(0,0,0,0.5); backdrop-filter: blur(5px); color: white; text-decoration: none;
            font-size: 0.8rem; letter-spacing: 3px; transition: var(--silk-transition); border-radius: 30px;
        }
        .hero-btn:hover { background: white; color: black; border-color: white; }

        /* 3. TIMELINE REVISI (MENYATU DENGAN HERO) */
        #timeline {
            background-color: var(--bg-black); /* Pastikan sama persis dengan ujung gradasi hero */
            padding-top: 120px; /* Jarak napas biar ga nabrak */
        }
        .timeline { position: relative; max-width: 900px; margin: 0 auto; }
        .timeline::after { content: ''; position: absolute; width: 1px; background-color: #222; top: 0; bottom: 0; left: 50%; margin-left: -0.5px; } /* Garis lebih samar (#222) */
        
        .timeline-container { padding: 10px 40px; position: relative; width: 50%; }
        .left { left: 0; text-align: right; }
        .right { left: 50%; text-align: left; }
        
        /* Kartu Timeline jadi lebih soft (Glassy) */
        .timeline-content { 
            padding: 25px 35px; 
            background: rgba(20, 20, 20, 0.6); /* Semi transparan */
            border: 1px solid #1a1a1a; /* Border sangat tipis */
            backdrop-filter: blur(5px);
            transition: var(--silk-transition); 
            border-radius: 4px;
        }
        .timeline-content:hover { 
            border-color: #444; 
            transform: scale(1.02); 
            background: rgba(30, 30, 30, 0.8);
        }

        .gallery-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 30px; }
        .polaroid { background: white; padding: 10px 10px 40px 10px; width: 200px; transform: rotate(-3deg); transition: 0.5s; filter: grayscale(100%); }
        .polaroid img { width: 100%; height: 220px; object-fit: cover; }
        .polaroid:hover { transform: scale(1.1) rotate(0deg); filter: grayscale(0%); z-index: 10; box-shadow: 0 0 30px rgba(255,255,255,0.2); }
        
        .music-layout { display: flex; flex-wrap: wrap; gap: 50px; align-items: center; justify-content: center; width: 100%; max-width: 900px; }
        .spotify-box { flex: 1; min-width: 300px; }

        .why-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 40px; width: 100%; max-width: 800px; margin-top: 30px; }
        .why-item { display: flex; flex-direction: column; align-items: center; transition: 0.5s; }
        .why-img-frame { width: 90px; height: 90px; border-radius: 50%; overflow: hidden; border: 1px solid #333; padding: 4px; margin-bottom: 15px; transition: 0.5s; }
        .why-img-frame img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; filter: grayscale(100%); }
        .why-item:hover .why-img-frame { border-color: white; transform: scale(1.1); }
        .why-item:hover img { filter: grayscale(0%); }

        /* BUBBLE GLOSSY */
        .jokes-section { overflow: hidden; position: relative; }
        .jokes-container { position: relative; height: 700px; width: 100%; max-width: 1200px; }
        .bubble-glossy {
            position: absolute; width: 130px; height: 130px; border-radius: 50%;
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(3px); -webkit-backdrop-filter: blur(3px);
            border: 1px solid rgba(255, 255, 255, 0.2); border-top: 1px solid rgba(255, 255, 255, 0.8); border-bottom: 1px solid rgba(255, 255, 255, 0.5);
            box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.1), 0 10px 20px rgba(0, 0, 0, 0.3);
            color: white; text-shadow: 0 2px 5px rgba(0,0,0,0.9);
            display: flex; justify-content: center; align-items: center; text-align: center;
            font-size: 0.85rem; letter-spacing: 1px; padding: 15px; font-weight: 600; will-change: transform; z-index: 2;
        }
        .bubble-glossy::after {
            content: ''; position: absolute; top: 15%; left: 18%; width: 35%; height: 20%; border-radius: 50%;
            background: radial-gradient(ellipse at center, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(-45deg); filter: blur(1px); opacity: 0.9; pointer-events: none;
        }

        .gift-container { font-size: 4rem; cursor: pointer; transition: 0.5s; color: var(--gift-vintage); }
        .gift-container:hover { transform: scale(1.1) rotate(5deg); text-shadow: 0 0 30px rgba(141, 110, 99, 0.5); }
        footer { padding: 50px; border-top: 1px solid #111; font-size: 0.7rem; letter-spacing: 2px; color: #444; }

        #timeline-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 6000; display: none; justify-content: center; align-items: center; flex-direction: column; opacity: 0; transition: var(--silk-transition); }
        #modal-img { max-width: 80vw; max-height: 60vh; border: 1px solid #444; outline: 1px solid #fff; outline-offset: -10px; }

        @media (max-width: 600px) {
            .hero h1 { font-size: 2.5rem; }
            .timeline::after { left: 31px; }
            .timeline-container { width: 100%; padding-left: 70px; padding-right: 25px; }
            .left, .right { left: 0; text-align: left; }
            .music-layout { flex-direction: column; }
            .bubble-glossy { width: 90px; height: 90px; font-size: 0.65rem; } 
            .jokes-container { height: 500px; }
            #cursor-dot, #cursor-outline { display: none; }
            * { cursor: auto; }
        }
    </style>
</head>
<body>

    <div id="cursor-dot"></div>
    <div id="cursor-outline"></div>

    <audio id="sfx-typing" loop>
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-mechanical-keyboard-typing-1393.mp3" type="audio/mpeg">
    </audio>
    <audio id="lagu-bg" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-piano-reflection-593.mp3" type="audio/mpeg">
    </audio>

    <div id="login-overlay">
        <div id="particles-js"></div>
        <h2 class="hover-text-swap" data-hover="But not for you ü§ç" style="border:none; margin: 0; font-size: 0.9rem; letter-spacing: 6px; opacity: 0.6; color: #888;">
            RESTRICTED AREA
        </h2>
        <h1 style="margin: 25px 0 10px 0;">The Archive.</h1>
        <p style="margin: 0 0 30px 0; font-style: italic; font-size: 0.8rem; color: #666;">"Nur f√ºr ein Herz."</p>

        <div id="login-form-container" style="display: flex; flex-direction: column; align-items: center; transition: 1s;">
            <input type="password" id="passInput" class="login-input" placeholder="CODE">
            <p style="margin-top: 15px; font-size: 0.7rem; color: #444;">Hint: The year our universe brought us together.</p>
            <button class="login-btn hover-text-swap" data-hover="Ready to relive memories?" onclick="checkPass()">ENTER ARCHIVE</button>
            <p id="errorMsg" style="color: #8D6E63; display: none; margin-top: 25px; font-size: 0.8rem; font-style: italic;">Hmm‚Ä¶ coba ingat lagi momen penting kita ü§ç</p>
        </div>

        <div id="welcome-text">Welcome back, my favorite person.</div>
        <div id="access-msg">ACCESS GRANTED</div>
        <div class="archive-meta">Archiv seit ¬∑ 2024<br>Status: gesch√ºtzt</div>
    </div>

    <div id="echo-container">
        <img src="face.png" class="echo-img" id="echo1" style="z-index: 1;">
        <img src="face.png" class="echo-img" id="echo2" style="z-index: 2;">
        <img src="face.png" class="echo-img" id="echo3" style="z-index: 3;">
    </div>

    <div id="scroll-overlay">
        <div class="ambient-glow"></div>
        <div class="vignette-overlay"></div>
        <div id="letter-dust-container"></div>
        <div class="vintage-paper">
            <h3 style="margin-bottom: 30px; border-bottom: 1px solid #333; padding-bottom: 15px; font-style: italic;">A Note for You.</h3>
            <div id="typing-text" style="font-family: 'Courier New'; min-height: 100px; line-height: 1.6; font-size: 0.9rem;"></div>
            <br>
            <button class="login-btn" onclick="enterSite()" style="margin-top: 40px; border-color: #333; background: transparent; color: #888; cursor: pointer;">Begin Journey</button>
        </div>
    </div>

    <div id="timeline-modal">
        <img id="modal-img" src="" alt="Moment">
        <p id="modal-desc" style="margin-top: 20px; font-family: 'Playfair Display'; font-style: italic; color: white;"></p>
        <div onclick="closeModal()" style="margin-top: 30px; cursor: pointer; color: #666; font-size: 2rem;">√ó</div>
    </div>

    <div id="main-content">
        <section class="hero">
            <h1>Happy Birthday,<br>My Soul.</h1>
            <p style="margin-top: 20px;">Welcome to your gallery.</p>
            <a href="#timeline" class="hero-btn">Scroll Down</a>
        </section>

        <section id="timeline">
            <h2 style="margin-bottom: 50px;">The Timeline</h2>
            <div class="timeline">
                <div class="timeline-container left">
                    <div class="timeline-content hover-cursor-grow" onclick="openModal('t1.jpg', 'The First Encounter')">
                        <h3>Chapter I.</h3>
                        <p>Where it all started. Click to view.</p>
                    </div>
                </div>
                <div class="timeline-container right">
                    <div class="timeline-content hover-cursor-grow" onclick="openModal('t2.jpg', 'First Date Memories')">
                        <h3>Chapter II.</h3>
                        <p>The day I knew you were the one.</p>
                    </div>
                </div>
                <div class="timeline-container left">
                    <div class="timeline-content hover-cursor-grow" onclick="openModal('t3.jpg', 'Unforgettable Chaos')">
                        <h3>Chapter III.</h3>
                        <p>Just us being us.</p>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Captured Moments</h2>
            <div class="gallery-grid">
                <div class="polaroid"><img src="foto.jpg" alt="1"></div>
                <div class="polaroid"><img src="galeri1.jpg" alt="2"></div>
                <div class="polaroid"><img src="galeri2.jpg" alt="3"></div>
            </div>
        </section>

        <section>
            <h2>Why You?</h2>
            <div class="why-grid">
                <div class="why-item"><div class="why-img-frame"><img src="why1.jpg"></div><div class="why-text">Eyes</div></div>
                <div class="why-item"><div class="why-img-frame"><img src="why2.jpg"></div><div class="why-text">Mind</div></div>
                <div class="why-item"><div class="why-img-frame"><img src="why3.jpg"></div><div class="why-text">Smile</div></div>
                <div class="why-item"><div class="why-img-frame"><img src="why4.jpg"></div><div class="why-text">Soul</div></div>
                <div class="why-item"><div class="why-img-frame"><img src="why5.jpg"></div><div class="why-text">Laugh</div></div>
                <div class="why-item"><div class="why-img-frame"><img src="why6.jpg"></div><div class="why-text">Heart</div></div>
            </div>
        </section>

        <section>
            <h2>Our Soundtrack</h2>
            <div class="music-layout">
                <div class="polaroid" style="transform: rotate(-3deg); width: 220px;">
                    <img src="foto.jpg" alt="Music Cover">
                </div>
                <div class="spotify-box">
                    <p style="text-align: left; margin-bottom: 10px; color: #fff;">Currently Playing:</p>
                    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/4cOdK2wGLETKBW3PvgPWqT?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
                    <p style="text-align: left; font-size: 0.8rem; margin-top: 10px;">"This song feels like home."</p>
                </div>
            </div>
        </section>

        <section class="jokes-section" id="jokes-section">
            <h2>Inside Jokes</h2>
            <div class="jokes-container" id="jokes-area"></div>
        </section>

        <section>
            <h2>A Gift.</h2>
            <p>Open it, carefully.</p>
            <div class="gift-container hover-cursor-grow" onclick="bukaKado()">
                <i class="fa-solid fa-gift"></i>
            </div>
        </section>

        <footer>
            <p>2026 BIRTHDAY EDITION ‚Ä¢ CURATED WITH LOVE ‚Ä¢ BY [NAMA KAMU]</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        const PASS = "2024";
        const surat = "Hai.\n\nSelamat ulang tahun. \n\nSemoga tahun ini membawa ketenangan, kebahagiaan, dan segala hal baik yang pantas kamu dapatkan. \n\nLet's make more memories. \n\n- Yours.";
        const jokes = ["Si Wacana", "Besok Diet", "Terserah", "5 Menit Lagi", "Ganteng Doang", "Macet", "Sekali Lagi", "Hahahaha", "Sabar", "Otw (Kasur)"];

        const loginOverlay = document.getElementById('login-overlay');
        const loginForm = document.getElementById('login-form-container');
        const passInput = document.getElementById('passInput');
        const errorMsg = document.getElementById('errorMsg');
        const welcomeText = document.getElementById('welcome-text');
        const accessMsg = document.getElementById('access-msg');
        const echoContainer = document.getElementById('echo-container');
        const scrollOverlay = document.getElementById('scroll-overlay');
        const mainContent = document.getElementById('main-content');
        const sfxTyping = document.getElementById('sfx-typing');
        const laguBg = document.getElementById('lagu-bg');

        // CURSOR
        const cursorDot = document.getElementById('cursor-dot');
        const cursorOutline = document.getElementById('cursor-outline');
        
        window.addEventListener('mousemove', function(e) {
            const posX = e.clientX;
            const posY = e.clientY;
            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;
            cursorOutline.style.left = `${posX}px`;
            cursorOutline.style.top = `${posY}px`;
            mouseX = posX; mouseY = posY;
        });

        const hoverElements = document.querySelectorAll('a, button, .hover-cursor-grow, .gift-container, input');
        hoverElements.forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        function createParticles() {
            const container = document.getElementById('particles-js');
            for(let i=0; i<30; i++) {
                let p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + 'vw';
                p.style.width = (Math.random() * 3) + 'px';
                p.style.height = p.style.width;
                p.style.animationDuration = (Math.random() * 5 + 5) + 's';
                p.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(p);
            }
        }
        createParticles();

        function createLetterDust() {
            const container = document.getElementById('letter-dust-container');
            for(let i=0; i<40; i++) {
                let p = document.createElement('div');
                p.className = 'letter-dust';
                p.style.left = Math.random() * 100 + '%';
                p.style.top = Math.random() * 100 + '%';
                p.style.width = (Math.random() * 2) + 'px';
                p.style.height = p.style.width;
                p.style.animationDuration = (Math.random() * 10 + 10) + 's';
                p.style.animationDelay = (Math.random() * 5) + 's';
                container.appendChild(p);
            }
        }
        createLetterDust();

        function checkPass() {
            const input = passInput.value;
            if (input === PASS) {
                errorMsg.style.display = 'none';
                loginForm.style.opacity = '0';
                setTimeout(() => loginForm.style.display = 'none', 1000);
                setTimeout(() => { welcomeText.style.opacity = '1'; }, 500);
                setTimeout(() => {
                    welcomeText.style.opacity = '0';
                    accessMsg.style.opacity = '1';
                    setTimeout(() => {
                        loginOverlay.style.opacity = '0';
                        setTimeout(() => { loginOverlay.style.display = 'none'; }, 1500);
                        echoContainer.style.display = 'flex';
                        document.getElementById('echo1').classList.add('echo-active');
                        setTimeout(() => document.getElementById('echo2').classList.add('echo-active'), 200);
                        setTimeout(() => document.getElementById('echo3').classList.add('echo-active'), 400);
                        setTimeout(() => {
                            echoContainer.style.opacity = '0';
                            setTimeout(() => {
                                echoContainer.style.display = 'none';
                                showLetter();
                            }, 1000);
                        }, 2500);
                    }, 2000);
                }, 2500);
            } else {
                passInput.classList.add('shake');
                errorMsg.style.display = 'block';
                setTimeout(() => { passInput.classList.remove('shake'); passInput.value = ''; }, 500);
            }
        }
        passInput.addEventListener("keypress", function(event) { if (event.key === "Enter") checkPass(); });

        function showLetter() {
            scrollOverlay.style.display = 'flex';
            setTimeout(() => {
                scrollOverlay.style.opacity = '1';
                document.querySelector('.vintage-paper').classList.add('show-paper');
                typeWriter();
            }, 100);
        }

        let i = 0;
        function typeWriter() {
            sfxTyping.play();
            if (i < surat.length) {
                document.getElementById("typing-text").innerHTML += surat.charAt(i) === '\n' ? '<br>' : surat.charAt(i);
                i++;
                setTimeout(typeWriter, 50);
            } else {
                sfxTyping.pause();
            }
        }

        function enterSite() {
            scrollOverlay.style.opacity = '0';
            laguBg.play();
            setTimeout(() => {
                scrollOverlay.style.display = 'none';
                mainContent.style.display = 'block';
                setTimeout(() => { mainContent.style.opacity = 1; }, 100);
                initJokes();
            }, 1500);
        }

        function openModal(imgSrc, descText) {
            const modal = document.getElementById('timeline-modal');
            modal.style.display = 'flex';
            setTimeout(() => modal.style.opacity = 1, 50);
            document.getElementById('modal-img').src = imgSrc;
            document.getElementById('modal-desc').innerText = descText;
        }
        function closeModal() {
            const modal = document.getElementById('timeline-modal');
            modal.style.opacity = 0;
            setTimeout(() => modal.style.display = 'none', 1500);
        }

        // BUBBLES
        let bubbleElements = [];
        let mouseX = window.innerWidth / 2, mouseY = window.innerHeight / 2;
        
        function initJokes() {
            const container = document.getElementById('jokes-area');
            const section = document.getElementById('jokes-section');
            const rect = container.getBoundingClientRect();
            
            jokes.forEach((joke) => {
                const el = document.createElement('div');
                el.className = 'bubble-glossy';
                el.innerText = joke;
                container.appendChild(el);
                bubbleElements.push({
                    el: el, x: Math.random() * rect.width, y: Math.random() * rect.height,
                    vx: 0, vy: 0, offsetX: (Math.random() - 0.5) * 80, offsetY: (Math.random() - 0.5) * 80,
                });
            });
            animateBubbles();
            setInterval(() => {
                const spark = document.createElement('div');
                spark.className = 'particle'; 
                spark.style.left = Math.random() * 100 + '%'; spark.style.top = Math.random() * 100 + '%';
                section.appendChild(spark); setTimeout(() => spark.remove(), 1500);
            }, 800);
        }

        function animateBubbles() {
            const container = document.getElementById('jokes-area');
            if (!container) return; 
            const rect = container.getBoundingClientRect();
            const relativeMouseX = mouseX - rect.left;
            const relativeMouseY = mouseY - rect.top;

            bubbleElements.forEach((bubble, i) => {
                const targetX = relativeMouseX + bubble.offsetX;
                const targetY = relativeMouseY + bubble.offsetY;
                const dx = targetX - bubble.x; const dy = targetY - bubble.y;
                bubble.vx += dx * 0.008; bubble.vy += dy * 0.008;

                bubbleElements.forEach((otherBubble, j) => {
                    if (i === j) return; 
                    const diffX = bubble.x - otherBubble.x; const diffY = bubble.y - otherBubble.y;
                    const distance = Math.sqrt(diffX*diffX + diffY*diffY);
                    if (distance < 140) {
                        const force = (140 - distance) * 0.05; 
                        const angle = Math.atan2(diffY, diffX);
                        bubble.vx += Math.cos(angle) * force; bubble.vy += Math.sin(angle) * force;
                    }
                });
                bubble.vx *= 0.90; bubble.vy *= 0.90;
                bubble.x += bubble.vx; bubble.y += bubble.vy;
                if (bubble.x < 0) { bubble.x = 0; bubble.vx *= -1; }
                if (bubble.x > rect.width - 130) { bubble.x = rect.width - 130; bubble.vx *= -1; }
                if (bubble.y < 0) { bubble.y = 0; bubble.vy *= -1; }
                if (bubble.y > rect.height - 130) { bubble.y = rect.height - 130; bubble.vy *= -1; }
                bubble.el.style.transform = `translate(${bubble.x}px, ${bubble.y}px)`;
            });
            requestAnimationFrame(animateBubbles);
        }

        function bukaKado() {
            var duration = 3 * 1000; var end = Date.now() + duration;
            var colors = ['#ffffff', '#8D6E63', '#444444']; 
            (function frame() {
                confetti({ particleCount: 7, angle: 60, spread: 60, origin: { x: 0 }, colors: colors });
                confetti({ particleCount: 7, angle: 120, spread: 60, origin: { x: 1 }, colors: colors });
                if (Date.now() < end) { requestAnimationFrame(frame); }
            }());
            setTimeout(() => { alert("Happy Birthday. Enjoy your day! ü§é"); }, 500);
        }
    </script>
</body>
</html>



